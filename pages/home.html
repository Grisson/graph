<div ng-controller="GraphCtrl" flex layout="row" layout-fill>
  <div flex layout="column" layout-fill>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <md-button>
          <core-icon icon="menu"></core-icon>
        </md-button>
        <span flex></span>
        <md-button class="icon-button" aria-label="PlayPause" ng-click="toggle()">
          <md-icon md-svg-src="{{toggleIcon}}"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
        <md-button class="icon-button" aria-label="Refresh" ng-click="refresh()" ng-disabled="isPolling">
          <md-icon md-svg-src="components/graph/img/Refresh.svg"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
        <md-button class="icon-button">
          <core-icon icon="more-vert"></core-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-content layout="row">
      <div flex="20">
        <div layout="column">
          <md-card flex layout="column" style="padding:0;">
            <md-card flex style="margin:0;">
              <md-button flex class="md-primary" ng-click="showHide('filters')">Filters</md-button>
            </md-card>
            <div flex id="filters" style="display:none; padding:0;">
              <div flex ng-repeat="transformName in viewModelService.viewModel.transformNames">
                <div flex layout-padding>
                  <md-button layout-fill class="md-raised md-primary" ng-click="setSelectedTransformName(transformName)">
                    {{transformName}}
                  </md-button>
                </div>
              </div>
            </div>
          </md-card>
          <md-card flex layout="column" style="padding:0;">
            <md-button flex class="md-primary" ng-click="showHide('samples')">Samples</md-button>
            <div flex id="samples" style="display:none; padding:0;">
              <div flex layout ng-repeat="sampleName in mockDataSampleNames">
                <div flex layout-padding>
                  <md-button layout-fill class="md-raised md-primary" ng-click="showMockDataSample(sampleName)">
                    {{sampleName}}
                  </md-button>
                </div>
              </div>
            </div>
          </md-card>
          <md-card flex layout="column" style="padding:0;">
            <md-card flex style="margin:0;">
              <md-button flex class="md-primary" ng-click="showHide('legend')">Legend</md-button>
            </md-card>
            <div flex id="legend" style="display:none; padding:0;">
              <md-card flex style="margin:0;">
                <div flex layout="row" layout-padding ng-repeat="type in getLegendNodeTypes()">
                  <md-checkbox style="margin:0;" ng-model="viewModelService.viewModel.configuration.legend.nodes[type].selected" 
                    ng-change="updateModel()">{{type}}</md-checkbox>
                  <span flex></span>
                  <svg width="20px" height="20px">
                    <circle r="9" cx="10" cy="10" fill="{{getLegendNodeStyle(type).fill}}"></circle>
                  </svg>
                </div>
              </md-card>
              <md-card flex style="margin:0;">
                <div flex>
                  <div flex layout="row" layout-padding ng-repeat="type in getLegendLinkTypes()">
                    <span>{{type}}</span>
                    <span flex></span>
                    <svg width="20px" height="20px">
                      <line x1="0" y1="10" x2="20" y2="10" stroke="{{getLegendLinkStyle(type).stroke}}" stroke-dasharray="{{getLegendLinkStyle(type).dash}}" fill="{{getLegendLinkStyle(type).fill}}" width="{{getLegendLinkStyle(type).width}}"></line>
                    </svg>
                  </div>
                </div>
              </md-card>
            </div>
          </md-card>
        </div>
      </div>
      <div flex="80" layout="column">
        <md-card flex layout layout-padding>
          <d3-visualization></d3-visualization>
        </md-card>
      </div>
    </md-content>
  </div>
</div>
