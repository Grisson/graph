<div ng-controller="GraphCtrl" flex layout="row" layout-fill>
  <div flex="20">
    <div layout="column">
      <md-card flex layout="row" layout-padding layout-align="space-between center">
        <md-button flex class="icon-button" aria-label="PlayPause" ng-click="toggle()">
          <md-icon md-svg-src="{{toggleIcon}}"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
        <md-button flex class="icon-button" aria-label="Refresh" ng-click="refresh()" ng-disabled="isPolling">
          <md-icon md-svg-src="components/graph/img/Refresh.svg"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
      </md-card>
      <md-card flex layout="column" layout-padding>
        <div flex layout>
          <h3>Queries</h3>
        </div>
        <div flex layout ng-repeat="transformName in viewModelService.viewModel.transformNames">
          <md-button layout-fill class="md-raised md-primary" ng-click="setSelectedTransformName(transformName)">{{transformName}}</md-button>
        </div>
      </md-card>
      <md-card flex layout="column" layout-padding>
        <div flex layout>
          <h3>Samples</h3>
        </div>
        <div flex layout ng-repeat="sampleName in mockDataSampleNames">
          <md-button layout-fill class="md-raised md-primary" ng-click="showMockDataSample(sampleName)">{{sampleName}}</md-button>
        </div>
      </md-card>
      <md-card flex layout="column" layout-padding>
        <div flex>
          <div flex layout layout-align="space-between center" ng-repeat="type in getLegendNodeTypes()">
            <md-checkbox ng-model="viewModelService.viewModel.configuration.legend.nodes[type].selected" 
              ng-change="updateModel()">{{type}}</md-checkbox>
            <svg width="30px" height="30px">
              <circle r="15" cx="15" cy="15" fill="{{getLegendNodeStyle(type).fill}}"></circle>
            </svg>
          </div>
        </div>
      </md-card>
      <md-card flex layout="column" layout-padding>
        <div flex>
          <div flex layout layout-align="space-between center" ng-repeat="type in getLegendLinkTypes()">
            <span>{{type}}</span>
            <svg width="30px" height="30px">
              <line x1="0" y1="15" x2="30" y2="15" stroke="{{getLegendLinkStyle(type).stroke}}" stroke-dasharray="{{getLegendLinkStyle(type).dash}}" fill="{{getLegendLinkStyle(type).fill}}" width="{{getLegendLinkStyle(type).width}}"></line>
            </svg>
          </div>
        </div>
      </md-card>
    </div>
  </div>
  <div flex="80" layout="column">
    <md-card flex layout layout-padding>
      <d3-visualization></d3-visualization>
    </md-card>
  </div>
</div>
