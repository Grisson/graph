<div ng-controller="GraphCtrl" flex layout="row" layout-fill>
  <div flex layout="column" layout-fill>
    <md-toolbar class="md-toolbar-small">
      <div class="md-toolbar-tools-small md-toolbar-tools">
        <button class="menu-icon" aria-label="Menu">
          <md-icon md-svg-src="/assets/img/icons/ic_menu_24px.svg"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </button>
        <span flex></span>
        <md-button class="icon-button" aria-label="Select" ng-click="toggleSelect()">
          <md-icon md-svg-src="{{selectIcon}}"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
        <md-button class="icon-button" aria-label="Source" ng-click="toggleSource()">
          <md-icon md-svg-src="{{sourceIcon}}"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
        <md-button class="icon-button" aria-label="PlayPause" ng-click="togglePlay()">
          <md-icon md-svg-src="{{playIcon}}"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
        <md-button class="icon-button" aria-label="Refresh" ng-click="refresh()" ng-disabled="isPolling">
          <md-icon md-svg-src="components/graph/img/Refresh.svg"></md-icon>
          <paper-ripple class="circle recenteringTouch" fit></paper-ripple>
        </md-button>
        <md-button ng-click="inspectSelection()" aria-label="Inspector">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" style="stroke:white; fill:white;"/>
          </svg>
        </md-button>
      </div>
    </md-toolbar>
    <md-content layout="row">
      <div flex="25">
        <div layout="column">
<!--           <md-card flex layout="column" style="padding:0;">
            <md-card flex style="margin:0;">
              <md-button flex class="md-primary" ng-click="showHide('graph')">Graph</md-button>
            </md-card>
            <div flex id="graph" style="display:none; padding:0;">
              <div flex ng-repeat="transformName in getTransformNames()">
                <div flex layout-padding>
                  <md-button layout-fill class="md-raised md-primary" ng-click="setSelectedTransformName(transformName)">
                    {{transformName}}
                  </md-button>
                </div>
              </div>
            </div>
          </md-card>
 -->
           <md-card flex layout="column" style="padding:0;">
            <md-card flex style="margin:0;">
              <md-button flex class="md-primary" ng-click="showHide('legend')">Legend</md-button>
            </md-card>
            <div flex id="legend" style="padding:0;">
              <md-card flex style="margin:0;" layout-padding>
                <table class="details-table">
                  <thead></thead>
                  <tbody>
                    <tr class="details-table-content-row" ng-repeat="type in getLegendNodeTypes()">
                      <td class="legend-table-icon">
                        <svg width="20px" height="20px">
                          <circle r="8" cx="10" cy="10" 
                            fill="{{getLegendNodeFill(type)}}" 
                            stroke="gray" 
                            stroke-width="2px" 
                            ng-click="toggleLegend(type)"></circle>
                        </svg>
                      </td>
                      <td class="legend-table-text">
                        <span>{{type}}</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </md-card>
              <md-card flex style="margin:0;" layout-padding>
                <table class="details-table">
                  <thead></thead>
                  <tbody>
                    <tr class="details-table-content-row" ng-repeat="type in getLegendLinkTypes()">
                      <td class="legend-table-icon">
                        <svg width="20px" height="20px">
                          <line x1="2" y1="10" x2="20" y2="10" 
                            stroke="{{getLegendLinkStyle(type).stroke}}" 
                            stroke-dasharray="{{getLegendLinkStyle(type).dash}}" 
                            fill="{{getLegendLinkStyle(type).fill}}" 
                            width="{{Math.max(getLegendLinkStyle(type).width, 2)}}">
                          </line>
                        </svg>
                      </td>
                      <td class="legend-table-text">
                        <span>{{type}}</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </md-card>
            </div>
          </md-card>
          <md-card flex layout="column" style="padding:0;">
            <md-card flex style="margin:0;">
              <md-button flex class="md-primary" ng-click="showHide('details')">Details</md-button>
            </md-card>
            <div flex id="details" style="padding:0;">
              <md-card flex style="margin:0;">
                <table class="details-table">
                  <thead></thead>
                  <tbody>
                    <tr class="details-table-content-row" ng-repeat="(tag, value) in getSelectionDetails()">
                      <td class="details-table-content" ng-class="bold">
                        {{tag}}
                      </td>
                      <td class="details-table-content" ng-class="gray">
                        <md-content>
                          {{value}}
                        </md-content>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </md-card>
            </div>
          </md-card>

 <!--
          <md-card flex layout="column" style="padding:0;">
            <md-button flex class="md-primary" ng-click="showHide('samples')">Samples</md-button>
            <div flex id="samples" style="display:none; padding:0;">
              <div flex layout ng-repeat="sampleName in sampleNames">
                <div flex layout-padding>
                  <md-button layout-fill class="md-raised md-primary" ng-click="showDataSample(sampleName)">
                    {{sampleName}}
                  </md-button>
                </div>
              </div>
            </div>
          </md-card>
 -->
        </div>
      </div>
      <div flex="75" layout="column">
        <md-card flex layout layout-padding>
          <d3-visualization></d3-visualization>
        </md-card>
      </div>
    </md-content>
  </div>
</div>
